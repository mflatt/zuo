#lang zuo/datum

(define free-id=?
  (lambda (state id1 id2)
    (let* ([bind1 (resolve* (state-binds state) id1)]
           [bind2 (resolve* (state-binds state) id2)])
      (or (specific=? bind1 bind2)
          (and (not bind1)
               (not bind2)
               (eq? (syntax-e id1) (syntax-e id2)))))))
